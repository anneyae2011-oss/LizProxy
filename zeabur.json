{
  "$schema": "https://schema.zeabur.app/template.json",
  "name": "Liz's Proxy",
  "description": "OpenAI-compatible API proxy with IP-based key generation",
  "icon": "https://raw.githubusercontent.com/openai/openai-python/main/logo.png",
  "tags": ["python", "fastapi", "proxy", "openai"],
  "build": {
    "type": "python"
  },
  "start": {
    "command": "sh -c 'uvicorn backend.main:app --host 0.0.0.0 --port ${PORT:-8080}'"
  },
  "env": {
    "ADMIN_PASSWORD": {
      "description": "Password for admin dashboard access",
      "required": true
    },
    "TARGET_API_URL": {
      "description": "Target API URL to proxy requests to",
      "default": "https://api.openai.com/v1"
    },
    "TARGET_API_KEY": {
      "description": "API key for the target service (can be set via admin dashboard)",
      "required": false
    },
    "MAX_CONTEXT": {
      "description": "Maximum input context token limit",
      "default": "128000"
    },
    "MAX_OUTPUT_TOKENS": {
      "description": "Maximum completion tokens per response (stops long outputs)",
      "default": "4096"
    },
    "DATABASE_URL": {
      "description": "PostgreSQL connection URL (optional, uses SQLite if not set)",
      "required": false
    },
    "PORT": {
      "description": "Port to run the server on",
      "default": "8080"
    },
    "MAX_KEYS_PER_IP": {
      "description": "Max API keys allowed per IP (abuse protection, 1-20)",
      "default": "2"
    },
    "SESSION_SECRET": {
      "description": "Secret for signing session cookies (set so login survives restarts; generate with: python -c \"import secrets; print(secrets.token_hex(32))\"",
      "required": false
    },
    "DISCORD_CLIENT_ID": {
      "description": "Discord OAuth2 Client ID (from https://discord.com/developers/applications)",
      "required": true
    },
    "DISCORD_CLIENT_SECRET": {
      "description": "Discord OAuth2 Client Secret",
      "required": true
    },
    "OAUTH_REDIRECT_URI": {
      "description": "Discord OAuth2 redirect URI (must match Discord Developer Portal)",
      "default": "https://lizley.zeabur.app/auth/callback"
    }
  },
  "ports": [
    {
      "port": 8080,
      "type": "HTTP"
    }
  ]
}
